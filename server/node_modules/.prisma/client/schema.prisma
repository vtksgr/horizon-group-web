generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Contact {
  id          Int         @id @default(autoincrement())
  type        ContactType
  firstName   String
  lastName    String
  email       String
  phoneNumber String
  postalCode  String
  address     String
  message     String

  company   CompanyContact?
  candidate CandidateContact?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model CompanyContact {
  id          Int                @id @default(autoincrement())
  contactId   Int                @unique
  companyName String
  position    CompanyPosition
  inquiryType CompanyInquiryType

  contact Contact @relation(fields: [contactId], references: [id], onDelete: Cascade)
}

model CandidateContact {
  id          Int                  @id @default(autoincrement())
  contactId   Int                  @unique
  inquiryType CandidateInquiryType
  resumeUrl   String?

  contact Contact @relation(fields: [contactId], references: [id], onDelete: Cascade)
}

enum ContactType {
  COMPANY
  CANDIDATE
}

enum CompanyPosition {
  MANAGER
  SECTION_CHIEF_MANAGER
  CHIEF_SECTION_CHIEF
  GENERAL_EMPLOYEE
}

enum CompanyInquiryType {
  RECRUITMENT
  INTERNATIONAL_STUDENT_SUPPORT
  INTERPRETATION_TRANSLATION
  SPECIFIED_SKILLED_WORKER
  REGISTRATION_SUPPORT
  EDUCATION_CONSULTING
  OTHER
}

enum CandidateInquiryType {
  INTERVIEWS_CONSULTATIONS
  RECRUITMENT
  ONLINE_CLASSES
  SEMINAR_PARTICIPATION
  JOB_HUNTING_SUPPORT
  CAREER_CHANGE_SUPPORT
  OTHER_SUPPORT
}

model Job {
  id Int @id @default(autoincrement())

  title String
  slug  String @unique

  isUrgent Boolean @default(false)

  companyName String? // e.g., Horizongroup Co., Ltd.

  employmentType String? // 正社員 (store as text for flexibility)

  description      String? // 仕事内容
  skillsRequired   String? // 応募資格
  workHours        String? // 勤務時間
  holidays         String? // 休日
  salary           String? // 給与
  location         String? // 勤務地
  interviewDetails String? // 面接

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([createdAt])
}
